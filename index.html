<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Postgres for MySQL users</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content" ref="one/01_slide/1">
<h1>Using Postgres and psql</h1>

<h2>For people who kind of know MySQL</h2></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="one/01_slide/2">
<h1>Assumptions</h1>

<ul>
<li>You're at least marginally familiar with MySQL</li>
<li>You find psql really cryptic</li>
<li>You don't just want to use a GUI</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="one/01_slide/3">
<h1>Launching It</h1></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/4">
<pre><code><code class="command">$ cat /etc/aeolus-conductor/database.yml</code>
<code class="command"># # snip ##</code>
<code class="result">production:
  adapter: postgresql
  database: conductor
  username: aeolus
  password: v23zj59an
  host: localhost
</code><code class="command"># # snip ##</code>
</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/5">
<h1>Launching It as a User</h1>

<pre><code><code class="command">$ psql conductor aeolus</code>
<code class="result">psql (9.0.5)
Type "help" for help.

conductor=&gt;
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/6">
<h1>Launching It (Not)</h1>

<pre><code><code class="command">$ sudo psql</code>
<code class="result">psql: FATAL:  role "root" does not exist
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/7">
<h1>Launching It (Insanely)</h1>

<pre><code><code class="command">$ sudo su - postgres</code>
<code class="result">-bash-4.2$ psql conductor
psql (9.0.5)
Type "help" for help.

conductor=#
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="one/01_slide/8">
<h1>Launching - Lessons Learned</h1>

<ul>
<li>Syntax: "psql [opts]... [db_name [username]]"</li>
<li>Will be prompted for a password if required</li>
<li>"postgres" system is user is analagous to root</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="one/01_slide/9">
<h1>Listing Things</h1>

<h2>Yes, it needs a subsection</h2>

<h3>No, I'm not joking.</h3></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/10">
<h1>MySQL is Easy</h1>

<pre class="sh_sql"><code>SHOW DATABASES;
SHOW TABLES FROM conductor;
USE conductor;
SHOW TABLES LIKE "%pool%";</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/11">
<h1>Postgres is Not Intuitive</h1>

<pre class="sh_sql"><code>\l
\dt
\c conductor
\dt *pool*</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="one/01_slide/12">
<h1>But It's Not Entirely Crazy</h1>

<ul>
<li>\l -- list databases</li>
<li>\d -- describe/list things</li>
<li>\dx variations</li>
<li>+ makes it verbose</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/13">
<h1>\l lists databases</h1>

<pre><code><code class="command">$ postgres=# \l</code>
<code class="result">                                    List of databases
         Name          |   Owner   | Encoding | Collation | Ctype |   Access privileges
-----------------------+-----------+----------+-----------+-------+-----------------------
 candlepin             | candlepin | UTF8     | C         | C     |
 conductor             | aeolus    | UTF8     | C         | C     |
 conductor_development | aeolus    | UTF8     | C         | C     |
 conductor_test        | aeolus    | UTF8     | C         | C     |
 postgres              | postgres  | UTF8     | C         | C     |
 template0             | postgres  | UTF8     | C         | C     | =c/postgres          +
                       |           |          |           |       | postgres=CTc/postgres
 template1             | postgres  | UTF8     | C         | C     | =c/postgres          +
                       |           |          |           |       | postgres=CTc/postgres
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/14">
<h1>\c changes database</h1>

<pre><code><code class="command">$ conductor=# \c conductor</code>
<code class="result">You are now connected to database "conductor".
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/15">
<h1>\d lists everything</h1>

<pre><code><code class="command">$ conductor=# \d</code>
<code class="result">.                       List of relations
 Schema |                Name                |   Type   | Owner
--------+------------------------------------+----------+--------
 public | base_permission_objects            | table    | aeolus
 public | base_permission_objects_id_seq     | sequence | aeolus
 public | catalog_entries                    | table    | aeolus
 public | catalogs                           | table    | aeolus
 public | catalogs_id_seq                    | sequence | aeolus
 public | cloud_accounts_id_seq              | sequence | aeolus
 public | config_servers                     | table    | aeolus
 public | config_servers_id_seq              | sequence | aeolus
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/16">
<h1>\d NAME describes NAME</h1>

<pre><code><code class="command">$ conductor=# \d roles</code>
<code class="result">                                        Table "public.roles"
     Column      |            Type             |                     Modifiers
-----------------+-----------------------------+----------------------------------------------------
 id              | integer                     | not null default nextval('roles_id_seq'::regclass)
 name            | character varying(255)      | not null
 scope           | character varying(255)      | not null
 lock_version    | integer                     | default 0
 created_at      | timestamp without time zone |
 updated_at      | timestamp without time zone |
 assign_to_owner | boolean                     | default false
Indexes:
    "roles_pkey" PRIMARY KEY, btree (id)
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/17">
<h1>+ makes it verbose</h1>

<pre><code><code class="command">$ conductor=# \d+ roles</code>
<code class="result">                                                    Table "public.roles"
     Column      |            Type             |                     Modifiers                      | Storage  | Description
-----------------+-----------------------------+----------------------------------------------------+----------+-------------
 id              | integer                     | not null default nextval('roles_id_seq'::regclass) | plain    |
 name            | character varying(255)      | not null                                           | extended |
 scope           | character varying(255)      | not null                                           | extended |
 lock_version    | integer                     | default 0                                          | plain    |
 created_at      | timestamp without time zone |                                                    | plain    |
 updated_at      | timestamp without time zone |                                                    | plain    |
 assign_to_owner | boolean                     | default false                                      | plain    |
Indexes:
    "roles_pkey" PRIMARY KEY, btree (id)
Has OIDs: no
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="one/01_slide/18">
<h1>\dx lists X things</h1>

<ul>
<li>\dt - Tables</li>
<li>\di - Indexes</li>
<li>\ds - Sequences</li>
<li>\dv - Views</li>
<li>\dS - System Views</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/19">
<h1>Tables: \dt</h1>

<pre><code><code class="command">$ conductor=# \dt</code>
<code class="result">                   List of relations
Schema |              Name               | Type  | Owner
--------+---------------------------------+-------+--------
public | base_permission_objects         | table | aeolus
public | catalog_entries                 | table | aeolus
public | catalogs                        | table | aeolus
public | config_servers                  | table | aeolus
public | credential_definitions          | table | aeolus
public | credentials                     | table | aeolus
public | delayed_jobs                    | table | aeolus
public | deployments                     | table | aeolus
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/20">
<h1>+ still makes it verbose</h1>

<pre><code><code class="command">$ conductor=# \dt+</code>
<code class="result">.                                 List of relations
 Schema |              Name               | Type  | Owner  |    Size    | Description
--------+---------------------------------+-------+--------+------------+-------------
 public | base_permission_objects         | table | aeolus | 8192 bytes |
 public | catalog_entries                 | table | aeolus | 0 bytes    |
 public | catalogs                        | table | aeolus | 0 bytes    |
 public | config_servers                  | table | aeolus | 0 bytes    |
 public | credential_definitions          | table | aeolus | 8192 bytes |
 public | credentials                     | table | aeolus | 8192 bytes |
 public | delayed_jobs                    | table | aeolus | 0 bytes    |
 public | deployments                     | table | aeolus | 8192 bytes |
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/21">
<h1>Indexes: \di</h1>

<pre><code><code class="command">$ conductor=&gt; \di</code>
<code class="result">                                    List of relations
 Schema |               Name               | Type  | Owner  |            Table
--------+----------------------------------+-------+--------+-----------------------------
 public | base_permission_objects_pkey     | index | aeolus | base_permission_objects
 public | catalogs_pkey                    | index | aeolus | catalogs
 public | cloud_accounts_pkey              | index | aeolus | provider_accounts
 public | config_servers_pkey              | index | aeolus | config_servers
 public | credential_definitions_pkey      | index | aeolus | credential_definitions
 public | credentials_pkey                 | index | aeolus | credentials
 public | delayed_jobs_pkey                | index | aeolus | delayed_jobs
 public | delayed_jobs_priority            | index | aeolus | delayed_jobs
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="one/01_slide/22">
<h1>Some Simple Queries</h1>

<h2>Showing the subtle differences from MySQL</h2></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/23">
<h1>Simplish Select (Wrong)</h1>

<pre><code><code class="command">$ conductor=# SELECT * FROM users WHERE login = "admin";</code>
<code class="result">ERROR:  column "admin" does not exist
LINE 1: SELECT * FROM users WHERE login = "admin";
                                           ^
</code><code class="command">$ conductor=#</code>
</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="one/01_slide/24">
<h1>Double quotes are verboten</h1>

<ul>
<li>They're actually not part of the ANSI standard</li>
<li>Optional double quotes for <strong>field names</strong> and such</li>
<li>Double quotes roughly equivalent to backticks in MySQL</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/25">
<h1>Simple Select (correct!)</h1>

<pre><code><code class="command">$ conductor=# SELECT id, login FROM users WHERE login = 'admin';</code>
<code class="result"> id | login
----+-------
  1 | admin
(1 row)
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/26">
<h1>With Excessive Double Quotes</h1>

<pre><code><code class="command">$ conductor=# SELECT "id", "login" FROM users WHERE "login" = 'admin';</code>
<code class="result"> id | login
----+-------
  1 | admin
(1 row)
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/27">
<h1>MySQL is Case Insensitive</h1>

<pre><code><code class="command">$ mysql&gt; SELECT user_login FROM wp_users where user_login = 'n1zyy';</code>
<code class="result">+------------+
| user_login |
+------------+
| n1zyy      |
+------------+
1 row in set (0.00 sec)


</code><code class="command">$ mysql&gt; SELECT user_login FROM wp_users where user_login = 'N1ZYY';</code>
<code class="result">+------------+
| user_login |
+------------+
| n1zyy      |
+------------+
1 row in set (0.00 sec)
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/28">
<h1>Postgres is Case Sensitive</h1>

<pre><code><code class="command">$ conductor=# SELECT id, login FROM users WHERE "login" = 'admin';</code>
<code class="result"> id | login
----+-------
  1 | admin
(1 row)

</code><code class="command">$ conductor=# SELECT id, login FROM users WHERE "login" = 'ADMIN';</code>
<code class="result"> id | login
----+-------
(0 rows)
</code></code></pre></div>
</div></div>

</body>
</html>
